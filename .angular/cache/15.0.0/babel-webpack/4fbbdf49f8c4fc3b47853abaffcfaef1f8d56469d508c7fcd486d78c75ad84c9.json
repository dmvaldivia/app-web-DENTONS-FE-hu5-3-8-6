{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/project.service\";\nimport * as i3 from \"@angular/router\";\nfunction ProjectNewComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 12);\n    i0.ɵɵelement(2, \"input\", 13)(3, \"input\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r2);\n  }\n}\nexport let ProjectNewComponent = /*#__PURE__*/(() => {\n  class ProjectNewComponent {\n    constructor(fb, projectService, router) {\n      this.fb = fb;\n      this.projectService = projectService;\n      this.router = router;\n      this.projectForm = this.fb.group({\n        nombre: ['', Validators.required],\n        precio: ['', Validators.required],\n        direccion: ['', Validators.required],\n        ubicacion: ['', Validators.required],\n        images: this.fb.array([this.fb.group({\n          nombre: '',\n          ruta: ''\n        })])\n      });\n    }\n    //Necesitamos una funcion para leer el arreglo de imagenes\n    get imagesGroup() {\n      return this.projectForm.get('images').controls;\n    }\n    insert(data) {\n      const token = sessionStorage.getItem('token');\n      const header = {\n        Authorization: 'Bearer ' + token\n      };\n      this.projectService.adminProjectInsert(data, header).subscribe(rest => {\n        if (rest.isSuccess) {\n          alert('Proyecto generado con ID: ' + rest.data.id);\n          this.router.navigate(['admin/project/index']);\n        } else {\n          alert(rest.errorMessage);\n        }\n      });\n    }\n    onSubmit() {\n      if (this.projectForm.valid) {\n        this.insert(this.projectForm.value);\n      }\n    }\n    ngOnInit() {}\n  }\n  ProjectNewComponent.ɵfac = function ProjectNewComponent_Factory(t) {\n    return new (t || ProjectNewComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProjectService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  ProjectNewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProjectNewComponent,\n    selectors: [[\"app-project-new\"]],\n    decls: 19,\n    vars: 2,\n    consts: [[1, \"login-dark\", 2, \"background-image\", \"url('assets/img/backgrounds/form-bg.jpg')\"], [2, \"background-color\", \"rgba(255,255,255,0.9)\", 3, \"formGroup\"], [1, \"text-center\", 2, \"color\", \"#ffa555\", \"font-size\", \"26px\", \"margin-bottom\", \"20px\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"nombre\", \"placeholder\", \"Nombre\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"], [\"type\", \"number\", \"formControlName\", \"precio\", \"placeholder\", \"Precio\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"], [\"type\", \"text\", \"formControlName\", \"direccion\", \"placeholder\", \"Direccion\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"], [\"type\", \"text\", \"formControlName\", \"ubicacion\", \"placeholder\", \"Ubicacion\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"], [\"formGroupName\", \"images\"], [4, \"ngFor\", \"ngForOf\"], [1, \"form-group\", \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 2, \"background-color\", \"#ffa555\", \"font-weight\", \"normal\", 3, \"click\"], [3, \"formGroupName\"], [\"type\", \"text\", \"formControlName\", \"nombre\", \"placeholder\", \"Nombre Imagen\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"], [\"type\", \"text\", \"formControlName\", \"ruta\", \"placeholder\", \"Ruta Imagen\", \"autocomplete\", \"off\", 1, \"form-control\", 2, \"color\", \"rgb(0,0,0)\"]],\n    template: function ProjectNewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"Registrar\");\n        i0.ɵɵelement(4, \"br\");\n        i0.ɵɵtext(5, \"Proyecto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵelement(7, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 3);\n        i0.ɵɵelement(9, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 3);\n        i0.ɵɵelement(11, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 3);\n        i0.ɵɵelement(13, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 8);\n        i0.ɵɵtemplate(15, ProjectNewComponent_div_15_Template, 4, 1, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 10)(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function ProjectNewComponent_Template_button_click_17_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(18, \"Registrar\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.projectForm);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngForOf\", ctx.imagesGroup);\n      }\n    }\n  });\n  return ProjectNewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}